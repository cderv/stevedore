<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Constructors for complex types — docker_types • stevedore</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">stevedore</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/stevedore.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/examples.html">Examples and use-cases</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Constructors for complex types</h1>
    </div>

    
    <p>Methods for building complex docker types.  This is most objects
more complicated than R's atomic types.  Most functions will
indicate if they require one of these objects in their help.  None
of these functions do anything interesting in their own regard -
they just validate inputs.</p>
    

        
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The functions here will all depend on the API versions - some of
the most fluid parts of the docker API are the different options
that are supported via things like <code>host_config</code>.</p>
<p>These functions are needed because <code>stevedore</code> aims to be a
fairly direct wrapping aroud the docker API.  For most of the
single host methods the types here are not really used (with the
notable exception of <code>host_config</code> which is used by
<code>$container$create</code> and <code>$container$update</code>).  But for
the swarm endpoints the function definitions would be impossibly
complex if we did not reflect the types.  So rather than one
function call with a hundred arguments, we can build up the
required types.
    Below is reference documentation for all methods for version
'1.29'
of the docker API - other versions are available. This documentation
is automatically generated from docker's API schema, and so
inaccuracies may exist between it and stevedore's interface
(especially references to JSON objects). Please report any
documentation that might be improved at
https://github.com/richfitz/stevedore/issues
    <h3>Methods</h3>
    <dl class='dl-horizontal'>
<dt><code>container_spec</code></dt><dd><p>container_spec
    <em>Usage:</em>
<pre>  container_spec(image = NULL, labels = NULL, command = NULL,
      args = NULL, hostname = NULL, env = NULL, dir = NULL,
      user = NULL, groups = NULL, tty = NULL,
      open_stdin = NULL, read_only = NULL, mounts = NULL,
      stop_signal = NULL, stop_grace_period = NULL,
      health_check = NULL, hosts = NULL, dns_config = NULL,
      secrets = NULL)</pre>
    <em>Arguments:</em>
<ul>
<li><p><code>image</code>: The image name to use for the container.</p></li>
<li><p><code>labels</code>: User-defined key/value data.</p></li>
<li><p><code>command</code>: The command to be run in the image.</p></li>
<li><p><code>args</code>: Arguments to the command.</p></li>
<li><p><code>hostname</code>: The hostname to use for the container, as a valid RFC 1123 hostname.</p></li>
<li><p><code>env</code>: A list of environment variables in the form <code>VAR=value</code>.</p></li>
<li><p><code>dir</code>: The working directory for commands to run in.</p></li>
<li><p><code>user</code>: The user inside the container.</p></li>
<li><p><code>groups</code>: A list of additional groups that the container process will run as.</p></li>
<li><p><code>tty</code>: Whether a pseudo-TTY should be allocated.</p></li>
<li><p><code>open_stdin</code>: Open <code>stdin</code></p></li>
<li><p><code>read_only</code>: Mount the container's root filesystem as read only.</p></li>
<li><p><code>mounts</code>: Specification for mounts to be added to containers created as part of the service.</p></li>
<li><p><code>stop_signal</code>: Signal to stop the container.</p></li>
<li><p><code>stop_grace_period</code>: Amount of time to wait for the container to terminate before forcefully killing it.</p></li>
<li><p><code>health_check</code>: A test to perform to check that the container is healthy.</p></li>
<li><p><code>hosts</code>: A list of hostnames/IP mappings to add to the container's <code>/etc/hosts</code> file.
The format of extra hosts on swarmkit is specified in:
http://man7.org/linux/man-pages/man5/hosts.5.html
  IP_address canonical_hostname [aliases...]</p></li>
<li><p><code>dns_config</code>: Specification for DNS related configurations in resolver configuration file (<code>resolv.conf</code>). Construct with <code>$types$dns_config()</code></p></li>
<li><p><code>secrets</code>: Secrets contains references to zero or more secrets that will be exposed to the service.</p></li>
</ul></p></dd>
<dt><code>dns_config</code></dt><dd><p>Specification for DNS related configurations in resolver configuration file (<code>resolv.conf</code>).
    <em>Usage:</em>
<pre>  dns_config(nameservers = NULL, search = NULL,
      options = NULL)</pre>
    <em>Arguments:</em>
<ul>
<li><p><code>nameservers</code>: The IP addresses of the name servers.</p></li>
<li><p><code>search</code>: A search list for host-name lookup.</p></li>
<li><p><code>options</code>: A list of internal resolver variables to be modified (e.g., <code>debug</code>, <code>ndots:3</code>, etc.).</p></li>
</ul></p></dd>
<dt><code>health_config</code></dt><dd><p>A test to perform to check that the container is healthy.
    <em>Usage:</em>
<pre>  health_config(test = NULL, interval = NULL, timeout = NULL,
      retries = NULL, start_period = NULL)</pre>
    <em>Arguments:</em>
<ul>
<li><p><code>test</code>: The test to perform. Possible values are:</p><ul>
<li><p><code>[]</code> inherit healthcheck from image or parent image</p></li>
<li><p><code>["NONE"]</code> disable healthcheck</p></li>
<li><p><code>["CMD", args...]</code> exec arguments directly</p></li>
<li><p><code>["CMD-SHELL", command]</code> run command with system's default shell</p></li>
</ul></li>
<li><p><code>interval</code>: The time to wait between checks in nanoseconds. It should be 0 or not less than 1000000000(1s). 0 means inherit.</p></li>
<li><p><code>timeout</code>: The time to wait before considering the check to have hung. It should be 0 or not less than 1000000000(1s). 0 means inherit.</p></li>
<li><p><code>retries</code>: The number of consecutive failures needed to consider a container as unhealthy. 0 means inherit.</p></li>
<li><p><code>start_period</code>: Start period for the container to initialize before starting health-retries countdown in nanoseconds. 0 means inherit.</p></li>
</ul></p></dd>
<dt><code>help</code></dt><dd><p>Display help for this object
    <em>Usage:</em>
<pre>  help(help_type = getOption("help_type"))</pre>
    <em>Arguments:</em>
<ul>
<li><p><code>help_type</code>: Passed to <code><a href='http://www.rdocumentation.org/packages/utils/topics/help'>utils::help</a></code>, can be one of "text", "html" or "pdf" (or an abbreviation).  By default it uses the value <code>getOption("help_type")</code> and should follow the same behaviour as other R help (e.g., using "?")</p></li>
</ul></p></dd>
<dt><code>mount</code></dt><dd><p>mount
    <em>Usage:</em>
<pre>  mount(target = NULL, source = NULL, type = NULL,
      read_only = NULL, consistency = NULL,
      bind_options = NULL, volume_options = NULL,
      tmpfs_options = NULL)</pre>
    <em>Arguments:</em>
<ul>
<li><p><code>target</code>: Container path.</p></li>
<li><p><code>source</code>: Mount source (e.g. a volume name, a host path).</p></li>
<li><p><code>type</code>: The mount type. Available types:</p><ul>
<li><p><code>bind</code> Mounts a file or directory from the host into the container. Must exist prior to creating the container.</p></li>
<li><p><code>volume</code> Creates a volume with the given name and options (or uses a pre-existing volume with the same name and options). These are **not** removed when the container is removed.</p></li>
<li><p><code>tmpfs</code> Create a tmpfs with the given options. The mount source cannot be specified for tmpfs.</p></li>
</ul></li>
<li><p><code>read_only</code>: Whether the mount should be read-only.</p></li>
<li><p><code>consistency</code>: The consistency requirement for the mount: <code>default</code>, <code>consistent</code>, <code>cached</code>, or <code>delegated</code>.</p></li>
<li><p><code>bind_options</code>: Optional configuration for the <code>bind</code> type.</p></li>
<li><p><code>volume_options</code>: Optional configuration for the <code>volume</code> type.</p></li>
<li><p><code>tmpfs_options</code>: Optional configuration for the <code>tmpfs</code> type.</p></li>
</ul></p></dd>
<dt><code>task_placement</code></dt><dd><p>task_placement
    <em>Usage:</em>
<pre>  task_placement(constraints = NULL, preferences = NULL)</pre>
    <em>Arguments:</em>
<ul>
<li><p><code>constraints</code>: An array of constraints.</p></li>
<li><p><code>preferences</code>: Preferences provide a way to make the scheduler aware of factors such as topology. They are provided in order from highest to lowest precedence.</p></li>
</ul></p></dd>
<dt><code>task_resources</code></dt><dd><p>Resource requirements which apply to each individual container created as part of the service.
    <em>Usage:</em>
<pre>  task_resources(limits = NULL, reservation = NULL)</pre>
    <em>Arguments:</em>
<ul>
<li><p><code>limits</code>: Define resources limits.</p></li>
<li><p><code>reservation</code>: Define resources reservation.</p></li>
</ul></p></dd>
<dt><code>task_restart_policy</code></dt><dd><p>Specification for the restart policy which applies to containers created as part of this service.
    <em>Usage:</em>
<pre>  task_restart_policy(condition = NULL, delay = NULL,
      max_attempts = NULL, window = NULL)</pre>
    <em>Arguments:</em>
<ul>
<li><p><code>condition</code>: Condition for restart.</p></li>
<li><p><code>delay</code>: Delay between restart attempts.</p></li>
<li><p><code>max_attempts</code>: Maximum attempts to restart a given container before giving up (default value is 0, which is ignored).</p></li>
<li><p><code>window</code>: Windows is the time window used to evaluate the restart policy (default value is 0, which is unbounded).</p></li>
</ul></p></dd>
<dt><code>task_spec</code></dt><dd><p>User modifiable task configuration.
    <em>Usage:</em>
<pre>  task_spec(container_spec = NULL, resources = NULL,
      restart_policy = NULL, placement = NULL,
      force_update = NULL, networks = NULL, log_driver = NULL)</pre>
    <em>Arguments:</em>
<ul>
<li><p><code>container_spec</code>: Construct with <code>$types$container_spec()</code></p></li>
<li><p><code>resources</code>: Resource requirements which apply to each individual container created as part of the service.</p></li>
<li><p><code>restart_policy</code>: Specification for the restart policy which applies to containers created as part of this service.</p></li>
<li><p><code>placement</code>: NA</p></li>
<li><p><code>force_update</code>: A counter that triggers an update even if no relevant parameters have been changed.</p></li>
<li><p><code>networks</code>: NA</p></li>
<li><p><code>log_driver</code>: Specifies the log driver to use for tasks created from this spec. If not present, the default one for the swarm will be used, finally falling back to the engine default if not specified.</p></li>
</ul></p></dd>
</dl></p>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      
      <li><a href="#details">Details</a></li>
          </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Rich FitzJohn.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
